#!/bin/bash
# üöÄ SECUREBASE LIVE MODE - MANUAL SETUP COMMANDS
# Copy and paste these commands one by one

echo "üöÄ SECUREBASE LIVE MODE SETUP"
echo "============================="
echo ""

# Prerequisites check
echo "üìã Step 1: Prerequisites"
echo "‚Ä¢ Stripe account verified with business info"
echo "‚Ä¢ Bank account connected for payouts"  
echo "‚Ä¢ Live API keys ready (pk_live_... and sk_live_...)"
echo ""

# Install dependencies
echo "üíª Step 2: Install Portal Dependencies"
echo "cd phase3a-portal"
echo "npm install"
echo ""

# Stripe CLI setup (if not installed)
echo "üîß Step 3: Install Stripe CLI (if needed)"
echo "# macOS:"
echo "brew install stripe/stripe-cli/stripe"
echo "# or download from: https://github.com/stripe/stripe-cli/releases"
echo ""

# Create products manually
echo "üõçÔ∏è  Step 4: Create Stripe Products (Run these with your live secret key)"
echo ""
echo "# Set your live secret key"
echo "export STRIPE_API_KEY=sk_live_YOUR_SECRET_KEY_HERE"
echo ""

# Healthcare tier
echo "# Healthcare Tier ($15,000/month)"
echo "stripe products create \\"
echo "  --name 'SecureBase Healthcare' \\"
echo "  --description 'HIPAA-compliant AWS Landing Zone with 7-year retention' \\"
echo "  --metadata tier=healthcare \\"
echo "  --metadata framework=hipaa"
echo ""
echo "# Get the product ID from output above, then:"
echo "stripe prices create \\"
echo "  --product prod_HEALTHCARE_ID_FROM_ABOVE \\"
echo "  --currency usd \\"
echo "  --unit-amount 1500000 \\"
echo "  --recurring interval=month \\"
echo "  --nickname 'Healthcare Monthly'"
echo ""

# Fintech tier  
echo "# Fintech Tier ($8,000/month)"
echo "stripe products create \\"
echo "  --name 'SecureBase Fintech' \\"
echo "  --description 'SOC2 Type II compliant AWS Landing Zone' \\"
echo "  --metadata tier=fintech \\"
echo "  --metadata framework=soc2"
echo ""
echo "stripe prices create \\"
echo "  --product prod_FINTECH_ID_FROM_ABOVE \\"
echo "  --currency usd \\"
echo "  --unit-amount 800000 \\"
echo "  --recurring interval=month \\"
echo "  --nickname 'Fintech Monthly'"
echo ""

# Government tier
echo "# Government Tier ($25,000/month)" 
echo "stripe products create \\"
echo "  --name 'SecureBase Government' \\"
echo "  --description 'FedRAMP-aligned AWS Landing Zone' \\"
echo "  --metadata tier=government \\"
echo "  --metadata framework=fedramp"
echo ""
echo "stripe prices create \\"
echo "  --product prod_GOVERNMENT_ID_FROM_ABOVE \\"
echo "  --currency usd \\"
echo "  --unit-amount 2500000 \\"
echo "  --recurring interval=month \\"
echo "  --nickname 'Government Monthly'"
echo ""

# Standard tier
echo "# Standard Tier ($2,000/month)"
echo "stripe products create \\"
echo "  --name 'SecureBase Standard' \\"
echo "  --description 'CIS Foundations compliant AWS Landing Zone' \\"
echo "  --metadata tier=standard \\"
echo "  --metadata framework=cis"
echo ""
echo "stripe prices create \\"
echo "  --product prod_STANDARD_ID_FROM_ABOVE \\"
echo "  --currency usd \\"
echo "  --unit-amount 200000 \\"
echo "  --recurring interval=month \\"
echo "  --nickname 'Standard Monthly'"
echo ""

# Pilot coupon
echo "# Pilot Program Coupon (50% off, 6 months, 20 customers)"
echo "stripe coupons create \\"
echo "  --percent-off 50 \\"
echo "  --duration repeating \\"
echo "  --duration-in-months 6 \\"
echo "  --max-redemptions 20 \\"
echo "  --name 'SecureBase Pilot Program'"
echo ""

echo "üìù Step 5: Update Portal Environment"
echo "# Create phase3a-portal/.env.production with:"
echo "VITE_STRIPE_PUBLIC_KEY=pk_live_YOUR_PUBLIC_KEY_HERE"
echo "VITE_API_BASE_URL=https://api.securebase.com/v1"  
echo "VITE_ENV=production"
echo "VITE_PILOT_PROGRAM_ENABLED=true"
echo ""

echo "üèóÔ∏è  Step 6: Build & Deploy Portal"
echo "cd phase3a-portal"
echo "npm run build"
echo ""
echo "# Deploy to Netlify:"
echo "npx netlify deploy --prod"
echo ""
echo "# Or deploy to Netlify:"
echo "npx netlify deploy --prod --dir=dist"
echo ""

echo "üîó Step 7: Configure Stripe Webhook"
echo "1. Go to: https://dashboard.stripe.com/webhooks"
echo "2. Add endpoint: [Your Lambda webhook URL]"
echo "3. Select events:"
echo "   - checkout.session.completed"  
echo "   - invoice.payment_succeeded"
echo "   - invoice.payment_failed"
echo ""

echo "üß™ Step 8: Test Payment"
echo "1. Visit your signup page"
echo "2. Select Fintech tier with pilot discount" 
echo "3. Use real card: 4000000000000002"
echo "4. Verify in Stripe Dashboard: https://dashboard.stripe.com/payments"
echo ""

echo "üéâ Step 9: Start Selling!"
echo "‚Ä¢ Share signup URL with prospects"
echo "‚Ä¢ Send LinkedIn messages and cold emails"
echo "‚Ä¢ Book demo calls"
echo "‚Ä¢ Monitor revenue in Stripe Dashboard"
echo ""

echo "üí∞ READY FOR REVENUE! üöÄ"